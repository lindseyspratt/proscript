<html lang="en">
<head>
    <title>
        Tiles source
    </title>
    <link rel="stylesheet" href="index.css"/>
    <script type="text/javascript" src="../dist/proscriptls.js"></script>
    <!-- proscriptls interpreter
    <script src="../terminal/jquery-3.3.1.js"></script>
    <script src="../terminal/jquery_terminal.js"></script>
    <link href="../terminal/jquery_terminal.css" rel="stylesheet"/>
    -->
</head>

<body onload="proscriptls_init ();">
<!-- Side navigation -->
<ul class="sidenav">
    <li><span class="caret"></span>
        <a   id="home_index" href="../index.html#home"> Home </a>
        <ul class='nested'>
            <li><a   id="prolog-for-the-web_index" href="../index.html#prolog-for-the-web"> Prolog for the Web </a></li>
            <li><a   id="running-proscriptls_index" href="../index.html#running-proscriptls"> Running ProscriptLS </a></li>
            <li><a   id="compiling-proscriptls_index" href="../index.html#compiling-proscriptls"> Compiling ProscriptLS </a></li>
            <li><a   id="basic-example_index" href="../index.html#basic-example"> Basic Example </a></li>
        </ul>
    </li>
    <li><span class="caret"></span><a   id="doc_index" href="index_doc.html#doc"> Documentation </a>
        <ul class='nested'>
            <li><span class="caret"></span><a   id="reference_index" href="index_doc.html#reference"> Reference </a>
                <ul class='nested'>
                    <li><a   id="using_proscriptls_index" href="index_doc.html#using_proscriptls"> Using ProscriptLS </a></li>
                    <li><a   id="debugger_index" href="index_doc.html#debugger"> Debugger </a></li>
                    <li><span class="caret"></span><a   id="objects_index" href="index_doc.html#objects"> Javascript objects </a>
                        <ul class='nested'>
                            <li><span class="caret"></span><a   id="web_api_index" href="index_doc.html#web_api"> Web API </a>
                                <ul class='nested'>
                                    <li><a   id="api_barprop_index" href="index_doc.html#api_barprop"> BarProp </a></li>
<li><a   id="api_blob_index" href="index_doc.html#api_blob"> Blob </a></li>
<li><a   id="api_canvasgradient_index" href="index_doc.html#api_canvasgradient"> CanvasGradient </a></li>
<li><a   id="api_canvaspattern_index" href="index_doc.html#api_canvaspattern"> CanvasPattern </a></li>
<li><a   id="api_canvasrenderingcontext2d_index" href="index_doc.html#api_canvasrenderingcontext2d"> CanvasRenderingContext2D </a></li>
<li><a   id="api_cssrule_index" href="index_doc.html#api_cssrule"> CSSRule </a></li>
<li><a   id="api_cssstyledeclaration_index" href="index_doc.html#api_cssstyledeclaration"> CSSStyleDeclaration </a></li>
<li><a   id="api_customelementregistry_index" href="index_doc.html#api_customelementregistry"> CustomElementRegistry </a></li>
<li><a   id="api_document_index" href="index_doc.html#api_document"> Document </a></li>
<li><a   id="api_documentfragment_index" href="index_doc.html#api_documentfragment"> DocumentFragment </a></li>
<li><a   id="api_element_index" href="index_doc.html#api_element"> Element </a></li>
<li><a   id="api_elementcreationoptions_index" href="index_doc.html#api_elementcreationoptions"> ElementCreationOptions </a></li>
<li><a   id="api_event_index" href="index_doc.html#api_event"> Event </a></li>
<li><a   id="api_eventtarget_index" href="index_doc.html#api_eventtarget"> EventTarget </a></li>
<li><a   id="api_file_index" href="index_doc.html#api_file"> File </a></li>
<li><a   id="api_history_index" href="index_doc.html#api_history"> History </a></li>
<li><a   id="api_htmlcanvaselement_index" href="index_doc.html#api_htmlcanvaselement"> HTMLCanvasElement </a></li>
<li><a   id="api_htmlelement_index" href="index_doc.html#api_htmlelement"> HTMLElement </a></li>
<li><a   id="api_htmlformelement_index" href="index_doc.html#api_htmlformelement"> HTMLFormElement </a></li>
<li><a   id="api_htmlimageelement_index" href="index_doc.html#api_htmlimageelement"> HTMLImageElement </a></li>
<li><a   id="api_htmlinputelement_index" href="index_doc.html#api_htmlinputelement"> HTMLInputElement </a></li>
<li><a   id="api_htmloptionelement_index" href="index_doc.html#api_htmloptionelement"> HTMLOptionElement </a></li>
<li><a   id="api_htmlselectelement_index" href="index_doc.html#api_htmlselectelement"> HTMLSelectElement </a></li>
<li><a   id="api_htmltextareaelement_index" href="index_doc.html#api_htmltextareaelement"> HTMLTextAreaElement </a></li>
<li><a   id="api_imagedata_index" href="index_doc.html#api_imagedata"> ImageData </a></li>
<li><a   id="api_location_index" href="index_doc.html#api_location"> Location </a></li>
<li><a   id="api_mouseevent_index" href="index_doc.html#api_mouseevent"> MouseEvent </a></li>
<li><a   id="api_navigator_index" href="index_doc.html#api_navigator"> Navigator </a></li>
<li><a   id="api_navigatorcontentutils_index" href="index_doc.html#api_navigatorcontentutils"> NavigatorContentUtils </a></li>
<li><a   id="api_navigatorcookies_index" href="index_doc.html#api_navigatorcookies"> NavigatorCookies </a></li>
<li><a   id="api_navigatorid_index" href="index_doc.html#api_navigatorid"> NavigatorID </a></li>
<li><a   id="api_navigatorlanguage_index" href="index_doc.html#api_navigatorlanguage"> NavigatorLanguage </a></li>
<li><a   id="api_navigatoronline_index" href="index_doc.html#api_navigatoronline"> NavigatorOnLine </a></li>
<li><a   id="api_node_index" href="index_doc.html#api_node"> Node </a></li>
<li><a   id="api_parentnode_index" href="index_doc.html#api_parentnode"> ParentNode </a></li>
<li><a   id="api_path2d_index" href="index_doc.html#api_path2d"> Path2D </a></li>
<li><a   id="api_textmetrics_index" href="index_doc.html#api_textmetrics"> TextMetrics </a></li>
<li><a   id="api_uievent_index" href="index_doc.html#api_uievent"> UIEvent </a></li>
<li><a   id="api_uint8clampedarray_index" href="index_doc.html#api_uint8clampedarray"> Uint8ClampedArray </a></li>
<li><a   id="api_validitystate_index" href="index_doc.html#api_validitystate"> ValidityState </a></li>
<li><a   id="api_window_index" href="index_doc.html#api_window"> Window </a></li>

                                </ul>
                            </li>
                            <li><a   id="object_language_index" href="index_doc.html#object_language"> Object Language </a></li>
                        </ul>
                    </li>
                    <li><a   id="library_index" href="index_doc.html#library"> Library </a></li>
                    <li><a   id="compilation_index" href="index_doc.html#compilation"> Compilation </a></li>
                    <li><a   id="syntax_index" href="index_doc.html#syntax"> Syntax </a></li>
                    <li><span class="caret"></span><a   id="predicates_index" href="index_doc.html#predicates"> Predicates </a>
                        <ul class='nested'>
                            <li><span class="caret"></span><a   id="pred_cat_dom_index" href="index_doc.html#pred_cat_dom"> dom </a>
<ul class='nested'>
<li><a   id="pred_alert_1_index" href="index_doc.html#pred_alert_1"> alert/1 </a></li>
<li><a   id="pred_append_dom_node_child_2_index" href="index_doc.html#pred_append_dom_node_child_2"> append_dom_node_child/2 </a></li>
<li><a   id="pred_create_dom_element_2_index" href="index_doc.html#pred_create_dom_element_2"> create_dom_element/2 </a></li>
<li><a   id="pred_create_dom_text_node_2_index" href="index_doc.html#pred_create_dom_text_node_2"> create_dom_text_node/2 </a></li>
<li><a   id="pred_dom_create_object_2_index" href="index_doc.html#pred_dom_create_object_2"> dom_create_object/2 </a></li>
<li><a   id="pred_dom_create_object_3_index" href="index_doc.html#pred_dom_create_object_3"> dom_create_object/3 </a></li>
<li><a   id="pred_dom_element_attribute_value_3_index" href="index_doc.html#pred_dom_element_attribute_value_3"> dom_element_attribute_value/3 </a></li>
<li><a   id="pred_dom_object_method_2_index" href="index_doc.html#pred_dom_object_method_2"> dom_object_method/2 </a></li>
<li><a   id="pred_dom_object_method_3_index" href="index_doc.html#pred_dom_object_method_3"> dom_object_method/3 </a></li>
<li><a   id="pred_dom_object_property_4_index" href="index_doc.html#pred_dom_object_property_4"> dom_object_property/4 </a></li>
<li><a   id="pred_dom_object_type_2_index" href="index_doc.html#pred_dom_object_type_2"> dom_object_type/2 </a></li>
<li><a   id="pred_dom_release_object_1_index" href="index_doc.html#pred_dom_release_object_1"> dom_release_object/1 </a></li>
<li><a   id="pred_dom_select_all_elements_2_index" href="index_doc.html#pred_dom_select_all_elements_2"> dom_select_all_elements/2 </a></li>
<li><a   id="pred_dom_select_element_2_index" href="index_doc.html#pred_dom_select_element_2"> dom_select_element/2 </a></li>
<li><a   id="pred_dom_type_method_5_index" href="index_doc.html#pred_dom_type_method_5"> dom_type_method/5 </a></li>
<li><a   id="pred_dom_type_parent_2_index" href="index_doc.html#pred_dom_type_parent_2"> dom_type_parent/2 </a></li>
<li><a   id="pred_dom_type_property_4_index" href="index_doc.html#pred_dom_type_property_4"> dom_type_property/4 </a></li>
<li><a   id="pred_dom_type_reference_4_index" href="index_doc.html#pred_dom_type_reference_4"> dom_type_reference/4 </a></li>
<li><a   id="pred_dom_window_1_index" href="index_doc.html#pred_dom_window_1"> dom_window/1 </a></li>
<li><a   id="pred_insert_before_dom_node_3_index" href="index_doc.html#pred_insert_before_dom_node_3"> insert_before_dom_node/3 </a></li>
<li><a   id="pred_remove_dom_element_class_2_index" href="index_doc.html#pred_remove_dom_element_class_2"> remove_dom_element_class/2 </a></li>
<li><a   id="pred_replace_dom_element_class_2_index" href="index_doc.html#pred_replace_dom_element_class_2"> replace_dom_element_class/2 </a></li>
<li><a   id="pred_set_dom_element_attribute_value_3_index" href="index_doc.html#pred_set_dom_element_attribute_value_3"> set_dom_element_attribute_value/3 </a></li>
<li><a   id="pred_set_dom_object_property_3_index" href="index_doc.html#pred_set_dom_object_property_3"> set_dom_object_property/3 </a></li>
<li><a   id="pred_set_dom_object_property_4_index" href="index_doc.html#pred_set_dom_object_property_4"> set_dom_object_property/4 </a></li>
<li><a   id="pred_toggle_dom_element_class_3_index" href="index_doc.html#pred_toggle_dom_element_class_3"> toggle_dom_element_class/3 </a></li>
</ul></li>
<li><span class="caret"></span><a   id="pred_cat_terms_index" href="index_doc.html#pred_cat_terms"> terms </a>
<ul class='nested'>
<li><a   id="pred_acyclic_term_1_index" href="index_doc.html#pred_acyclic_term_1"> acyclic_term/1 </a></li>
<li><a   id="pred_subsumes_term_2_index" href="index_doc.html#pred_subsumes_term_2"> subsumes_term/2 </a></li>
<li><a   id="pred_var_1_index" href="index_doc.html#pred_var_1"> var/1 </a></li>
</ul></li>

                        </ul>
                    </li>
               </ul>
            </li>
            <li><span class="caret"></span><a   id="examples_index" href="index_doc.html#examples"> Examples </a>
                <ul class="nested">
                    <li><span class="caret"></span><a   id="calculator_example_index" href="index_doc.html#calculator_example"> Calculator </a>
                        <ul class="nested">
                            <li><a   id="calculator_example_source_index" href="calculator_source.html#calculator_example_source"> Calculator Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="console_example_index" href="index_doc.html#console_example"> Console Button </a>
                        <ul class="nested">
                            <li><a   id="console_example_source_index" href="console_source.html#console_example_source"> Console Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="simple_example_index" href="index_doc.html#simple_example"> Simple </a>
                        <ul class="nested">
                            <li><a   id="simple_example_source_index" href="simple_source.html#simple_example_source"> Simple Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="likes_example_index" href="index_doc.html#likes_example"> Likes </a>
                        <ul class="nested">
                            <li><a   id="likes_example_source_index" href="likes_source.html#likes_example_source"> Likes Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="consult_console_example_index" href="index_doc.html#consult_console_example"> Consult console </a>
                        <ul class="nested">
                            <li><a   id="consult_console_example_source_index" href="consult_console_source.html#consult_console_example_source"> Consult Console Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="tiles_example_index" href="index_doc.html#tiles_example"> Tiles </a>
                        <ul class="nested">
                            <li><a class="active index"  id="tiles_example_source_index" href="#tiles_example_source"> Tiles Example Source </a></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a   id="download_index" href="index_download.html#download"> Download </a></li>
    <li><a   id="about_index" href="index_about.html#about"> About </a></li>
</ul>

<!-- Page content -->
<div class="content">
    <header>
        <h1>Tiles source</h1>
        <hr>
    </header>

    <div class="body" id="tiles_example_source">
    <p>
        The ProscriptLS source used in the Likes example.
        Links to these source files are:
        <a href="../examples/tiles.pl">tiles.pl</a>
        .
        This program uses the object.pl, listut2.pl, dom.pl, and data_predicates.pl library files.
    </p>
    <div id="prolog" style='white-space:nowrap;width:100%;height:100%;background-color:#eee;overflow:auto;float:left'>
    <div id="tiles_pl" >
        <h2 id='tiles_pl_header'>tiles.pl</h2>
        <code class='content'>
        <span style='color:red'>:-</span>&nbsp;module(tiles,&nbsp;[select_test/0]).<br>
<br>
<span style='color:red'>:-</span>&nbsp;use_module('../library/object').&nbsp;<span style='color:green'>%&nbsp;for&nbsp;>>/2.</span><br>
<span style='color:red'>:-</span>&nbsp;use_module('../library/data_predicates').<br>
<span style='color:red'>:-</span>&nbsp;ensure_loaded('../library/listut2').&nbsp;<span style='color:green'>%&nbsp;for&nbsp;append_lists/2</span><br>
<span style='color:red'>:-</span>&nbsp;ensure_loaded('../library/dom').&nbsp;<span style='color:green'>%&nbsp;for&nbsp;dom_page_offset/2</span><br>
<br>
<span style='color:red'>:-</span>&nbsp;dynamic(is_selected/1).<br>
<br>
<span style='color:green'>%&nbsp;For&nbsp;tiles&nbsp;the&nbsp;shadow&nbsp;tile&nbsp;structure&nbsp;functor&nbsp;is&nbsp;'ts'</span><br>
<span style='color:green'>%&nbsp;and&nbsp;the&nbsp;arguments&nbsp;are&nbsp;'x',&nbsp;'y',&nbsp;etc.</span><br>
<span style='color:green'>%&nbsp;For&nbsp;the&nbsp;game&nbsp;the&nbsp;shadow&nbsp;game&nbsp;structure&nbsp;functor&nbsp;is&nbsp;'g'</span><br>
<span style='color:green'>%&nbsp;and&nbsp;the&nbsp;arguments&nbsp;are&nbsp;'board_left',&nbsp;'turn',&nbsp;etc.</span><br>
<span style='color:green'>%&nbsp;(Note&nbsp;that&nbsp;there&nbsp;is&nbsp;currently&nbsp;only&nbsp;one&nbsp;'game'&nbsp;so&nbsp;the&nbsp;ID&nbsp;is&nbsp;always&nbsp;'1'.)</span><br>
<br>
<span style='color:red'>:-</span>&nbsp;initialization(init).<br>
<br>
init&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;data_predicate_dynamics([<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_predicates(g,&nbsp;game,[tile_size,&nbsp;board_left,&nbsp;board_top,&nbsp;board_width,&nbsp;board_height,&nbsp;board_translate,&nbsp;turn,&nbsp;replacements]),&nbsp;<span style='color:green'>%&nbsp;e.g.&nbsp;game_board_left(ID,&nbsp;X)...</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_predicates(ts,&nbsp;tile,[x,&nbsp;y,bx,by,size,colors,container]),&nbsp;<span style='color:green'>%&nbsp;e.g.&nbsp;tile_x(ID,&nbsp;X),&nbsp;tile_y(ID,&nbsp;Y)...</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_predicates(lp,&nbsp;legal_position,&nbsp;[bx,&nbsp;by])<br>
&nbsp;&nbsp;&nbsp;&nbsp;]).<br>
<br>
<br>
draw_tile_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(ts(20,&nbsp;20,&nbsp;1,&nbsp;1,&nbsp;50,&nbsp;[red,&nbsp;red,&nbsp;green,&nbsp;green],&nbsp;none),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_tile(<i>Ctx</i>,&nbsp;1).<br>
<br>
draw_all_tile_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(ts(20,&nbsp;20,&nbsp;1,&nbsp;1,&nbsp;50,&nbsp;[red,&nbsp;red,&nbsp;green,&nbsp;green],&nbsp;none),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tile(1,&nbsp;<i>Ctx</i>).<br>
<br>
draw_all_tiles_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_draw_all_tiles_test(<i>Ctx</i>,&nbsp;<i>W</i>,&nbsp;<i>H</i>,&nbsp;<i>Tiles</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tiles(<i>Tiles</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>W</i>,&nbsp;<i>H</i>).<br>
<br>
setup_draw_all_tiles_test(<i>Ctx</i>,&nbsp;<i>W</i>,&nbsp;<i>H</i>,&nbsp;[<i>Tile1</i>,&nbsp;<i>Tile2</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>,&nbsp;width&nbsp;+:>&nbsp;<i>W</i>,&nbsp;height&nbsp;+:>&nbsp;<i>H</i>],<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Tile1</i>&nbsp;=&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Tile2</i>&nbsp;=&nbsp;2,<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(ts(20,&nbsp;20,&nbsp;1,&nbsp;1,&nbsp;50,&nbsp;[red,&nbsp;red,&nbsp;green,&nbsp;green],&nbsp;none),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(ts(70,&nbsp;20,&nbsp;2,&nbsp;1,&nbsp;50,&nbsp;[green,&nbsp;red,&nbsp;green,&nbsp;red],&nbsp;none),&nbsp;2),<br>
<span style='color:green'>%&nbsp;[tile_size,&nbsp;board_left,&nbsp;board_top,&nbsp;board_width,&nbsp;board_height,&nbsp;board_translate,&nbsp;turn,&nbsp;replacements]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(g(50,&nbsp;0,&nbsp;0,&nbsp;800,&nbsp;800,&nbsp;0,&nbsp;1,&nbsp;[<i>Tile2</i>]),&nbsp;1),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;retractall(is_selected(<i>_</i>)),<br>
&nbsp;&nbsp;&nbsp;&nbsp;asserta(is_selected(<i>Tile1</i>)).<br>
<br>
draw_legal_moves_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_legal_moves(<i>Ctx</i>,&nbsp;<i>LPs1</i>,&nbsp;<i>LPs2</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_legal_moves(<i>LPs1</i>,&nbsp;<i>LPs2</i>,&nbsp;<i>Ctx</i>).<br>
<br>
setup_legal_moves(<i>Ctx</i>,&nbsp;[1],[<i>Tile2</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Tile2</i>&nbsp;=&nbsp;2,<br>
<span style='color:green'>%&nbsp;[tile_size,&nbsp;board_left,&nbsp;board_top,&nbsp;board_width,&nbsp;board_height,&nbsp;board_translate,&nbsp;turn,&nbsp;replacements]</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(g(50,&nbsp;10,&nbsp;10,&nbsp;200,&nbsp;200,&nbsp;1>1,&nbsp;1,&nbsp;[<i>Tile2</i>]),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(lp(1,1),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(lp(1,2),&nbsp;2).<br>
<br>
display_hands_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>,&nbsp;width&nbsp;+:>&nbsp;<i>W</i>,&nbsp;height&nbsp;+:>&nbsp;<i>H</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(g(50,&nbsp;10,&nbsp;10,&nbsp;800,&nbsp;800,&nbsp;1>1,&nbsp;1,&nbsp;[]),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;initial_hands_expanded(2,&nbsp;<i>Hands</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_hands(<i>Hands</i>,&nbsp;<i>TileIDs</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tiles(<i>TileIDs</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>W</i>,&nbsp;<i>H</i>).<br>
<br>
select_test&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_Canvas</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;width&nbsp;+:>&nbsp;<i>W</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;height&nbsp;+:>&nbsp;<i>H</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@&nbsp;dom_page_offset(<i>PTop</i>,&nbsp;<i>PLeft</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addEventListener(click,&nbsp;[object-<i>E</i>]^select(<i>E</i>,&nbsp;<i>PTop</i>,&nbsp;<i>PLeft</i>))],<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(g(50,&nbsp;10,&nbsp;10,&nbsp;800,&nbsp;800,&nbsp;1>1,&nbsp;1,&nbsp;[]),&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;initial_hands_expanded(2,&nbsp;<i>Hands</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_hands(<i>Hands</i>,&nbsp;<i>TileIDs</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tiles(<i>TileIDs</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>W</i>,&nbsp;<i>H</i>).<br>
<br>
&nbsp;<span style='color:green'>%&nbsp;clientX&nbsp;and&nbsp;clientY&nbsp;are&nbsp;coordinates&nbsp;within&nbsp;the&nbsp;containing&nbsp;HTMLCanvasElement</span><br>
&nbsp;<span style='color:green'>%&nbsp;It&nbsp;appears&nbsp;that&nbsp;the&nbsp;rendering&nbsp;coordinates&nbsp;(e.g.&nbsp;moveTo(RX,&nbsp;RY))&nbsp;are&nbsp;coordinates</span><br>
&nbsp;<span style='color:green'>%&nbsp;within&nbsp;the&nbsp;containing&nbsp;HTMLCanvasElement&nbsp;minus&nbsp;the&nbsp;canvas&nbsp;offset.</span><br>
&nbsp;<span style='color:green'>%&nbsp;RX&nbsp;=&nbsp;clientX&nbsp;-&nbsp;offsetX.</span><br>
<br>
select(<i>Event</i>,&nbsp;<i>PTop</i>,&nbsp;<i>PLeft</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Event</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[pageX&nbsp;+:>&nbsp;<i>PageX</i>,&nbsp;pageY&nbsp;+:>&nbsp;<i>PageY</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;dom_release_object(<i>Event</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>X</i>&nbsp;is&nbsp;<i>PageX</i>&nbsp;-&nbsp;<i>PLeft</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Y</i>&nbsp;is&nbsp;<i>PageY</i>&nbsp;-&nbsp;<i>PTop</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:green'>%&nbsp;writeln(select(PageX,&nbsp;PageY,&nbsp;PLeft,&nbsp;PTop,&nbsp;X,&nbsp;Y)),</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;(point_in_tile(<i>ID</i>,&nbsp;<i>X</i>,&nbsp;<i>Y</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;on_click_tile(<i>ID</i>,&nbsp;<i>X</i>,&nbsp;<i>Y</i>)&nbsp;&nbsp;<span style='color:green'>%&nbsp;at&nbsp;most&nbsp;one&nbsp;tile&nbsp;contains&nbsp;(X,&nbsp;Y).</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;legal_position_bx(<i>ID</i>,&nbsp;<i>BX</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;legal_position_by(<i>ID</i>,&nbsp;<i>BY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;point_in_board_position(<i>BX</i>,&nbsp;<i>BY</i>,&nbsp;<i>X</i>,&nbsp;<i>Y</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;).<br>
<br>
point_in_tile(<i>ID</i>,&nbsp;<i>MX</i>,&nbsp;<i>MY</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_x(<i>ID</i>,&nbsp;<i>TX</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_y(<i>ID</i>,&nbsp;<i>TY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_size(<i>ID</i>,&nbsp;<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;in_square(<i>MX</i>,&nbsp;<i>MY</i>,&nbsp;<i>TX</i>,&nbsp;<i>TY</i>,&nbsp;<i>Size</i>).<br>
<br>
in_square(<i>X</i>,&nbsp;<i>Y</i>,&nbsp;<i>Left</i>,&nbsp;<i>Top</i>,&nbsp;<i>Size</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;in_interval(<i>X</i>,&nbsp;<i>Left</i>,&nbsp;<i>Left</i>+<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;in_interval(<i>Y</i>,&nbsp;<i>Top</i>,&nbsp;<i>Top</i>+<i>Size</i>).<br>
<br>
in_interval(<i>V</i>,&nbsp;<i>Low</i>,&nbsp;<i>High</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>V</i>&nbsp;>=&nbsp;<i>Low</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>V</i>&nbsp;=&lt;&nbsp;<i>High</i>.<br>
<br>
point_in_board_position(<i>BX</i>,&nbsp;<i>BY</i>,&nbsp;<i>X</i>,&nbsp;<i>Y</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;game_tile_size(<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;board_position_top_left_coordinates(<i>BX</i>,&nbsp;<i>BY</i>,&nbsp;<i>BCX</i>,&nbsp;<i>BCY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;in_square(<i>X</i>,&nbsp;<i>Y</i>,&nbsp;<i>BCX</i>,&nbsp;<i>BCY</i>,&nbsp;<i>Size</i>).<br>
<br>
on_click_tile(<i>ID</i>,&nbsp;<i>_X</i>,&nbsp;<i>_Y</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<span style='color:green'>%writeln(click(ID,&nbsp;X,&nbsp;Y)),</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;(tile_in_active_hand(<i>ID</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;on_click_active_hand_tile(<i>ID</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;true&nbsp;<span style='color:green'>%&nbsp;writeln(not_active)</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;).<br>
<br>
on_click_active_hand_tile(<i>ID</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;canvas,&nbsp;getContext('2d')&nbsp;*:>&nbsp;<i>Ctx</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;(retract(is_selected(<i>OldID</i>))<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;draw_all_tile(<i>OldID</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:green'>%&nbsp;de-select&nbsp;OldID</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;asserta(is_selected(<i>ID</i>)),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tile(<i>ID</i>,&nbsp;<i>Ctx</i>).<br>
<br>
<br>
setup_hands([],&nbsp;[]).<br>
setup_hands([<i>_</i>+<i>HandTiles</i>|<i>T</i>],&nbsp;<i>IDs</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_hand(<i>HandTiles</i>,&nbsp;<i>IDs</i>,&nbsp;<i>IDTail</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_hands(<i>T</i>,&nbsp;<i>IDTail</i>).<br>
<br>
setup_hand([],&nbsp;<i>Tail</i>,&nbsp;<i>Tail</i>).<br>
setup_hand([<i>H</i>-<i>ID</i>|<i>T</i>],&nbsp;[<i>ID</i>|<i>OtherIDs</i>],&nbsp;<i>IDTail</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;assert_data(<i>H</i>,&nbsp;<i>ID</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;setup_hand(<i>T</i>,&nbsp;<i>OtherIDs</i>,&nbsp;<i>IDTail</i>).<br>
<br>
hand_origin(1).<br>
<br>
initial_hands_expanded(<i>NumberOfPlayers</i>,&nbsp;<i>ExpandedHands</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;initial_hands(<i>NumberOfPlayers</i>,&nbsp;<i>Hands</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_hands(<i>Hands</i>,&nbsp;<i>ExpandedHands</i>).<br>
<br>
expand_hands([],&nbsp;[]).<br>
expand_hands([<i>H</i>|<i>T</i>],&nbsp;[<i>EH</i>|<i>ET</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_hand(<i>H</i>,&nbsp;<i>EH</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_hands(<i>T</i>,&nbsp;<i>ET</i>).<br>
<br>
expand_hand(<i>ID</i>+<i>BriefTiles</i>,&nbsp;<i>ID</i>+<i>ExpandedTiles</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;game_tile_size(<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_brief_tiles(<i>BriefTiles</i>,&nbsp;<i>ID</i>,&nbsp;<i>Size</i>,&nbsp;<i>ExpandedTiles</i>).<br>
<br>
expand_brief_tiles([],&nbsp;<i>_</i>,&nbsp;<i>_</i>,&nbsp;[]).<br>
expand_brief_tiles([<i>H</i>|<i>T</i>],&nbsp;<i>HandID</i>,&nbsp;<i>Size</i>,&nbsp;[<i>EH</i>|<i>ET</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_brief_tile(<i>H</i>,&nbsp;<i>HandID</i>,&nbsp;<i>Size</i>,&nbsp;<i>EH</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;expand_brief_tiles(<i>T</i>,&nbsp;<i>HandID</i>,&nbsp;<i>Size</i>,&nbsp;<i>ET</i>).<br>
<br>
<span style='color:green'>%&nbsp;[x,&nbsp;y,bx,by,size,colors,container]</span><br>
expand_brief_tile(t(<i>BoardX</i>,&nbsp;<i>BoardY</i>,&nbsp;<i>AbstractColors</i>,&nbsp;<i>TileID</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>HandID</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Size</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ts(<i>X</i>,&nbsp;<i>Y</i>,&nbsp;<i>BoardX</i>,&nbsp;<i>BoardY</i>,&nbsp;<i>Size</i>,&nbsp;<i>Colors</i>,&nbsp;container(<i>HandID</i>,&nbsp;hand))-<i>TileID</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>X</i>&nbsp;is&nbsp;<i>BoardX</i>&nbsp;*&nbsp;<i>Size</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Y</i>&nbsp;is&nbsp;<i>BoardY</i>&nbsp;*&nbsp;<i>Size</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;abstract_colors(<i>AbstractColors</i>,&nbsp;<i>Colors</i>).<br>
<br>
abstract_colors([],&nbsp;[]).<br>
abstract_colors([<i>AH</i>|<i>AT</i>],&nbsp;[<i>CH</i>|<i>CT</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;abstract_color(<i>AH</i>,&nbsp;<i>CH</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;abstract_colors(<i>AT</i>,&nbsp;<i>CT</i>).<br>
<br>
abstract_color(a,&nbsp;red).<br>
abstract_color(b,&nbsp;green).<br>
abstract_color(c,&nbsp;blue).<br>
abstract_color(d,&nbsp;yellow).<br>
<br>
initial_hands(2,&nbsp;[1+<i>Player1Tiles</i>,&nbsp;2+<i>Player2Tiles</i>])&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;<i>Col1</i>&nbsp;is&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;<i>Col2</i>&nbsp;is&nbsp;<i>Col1</i>&nbsp;+&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;hand_origin(<i>Origin1</i>),<br>
&nbsp;&nbsp;&nbsp;<i>Player1Row1</i>&nbsp;is&nbsp;<i>Origin1</i>,<br>
&nbsp;&nbsp;&nbsp;<i>Player1Row2</i>&nbsp;is&nbsp;<i>Origin1</i>&nbsp;+&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;<i>Player1Row3</i>&nbsp;is&nbsp;<i>Origin1</i>&nbsp;+&nbsp;2,<br>
&nbsp;&nbsp;&nbsp;<i>Player1Row4</i>&nbsp;is&nbsp;<i>Origin1</i>&nbsp;+&nbsp;3,<br>
&nbsp;&nbsp;&nbsp;<i>Origin2</i>&nbsp;is&nbsp;<i>Origin1</i>&nbsp;+&nbsp;5,<br>
&nbsp;&nbsp;&nbsp;<i>Player2Row1</i>&nbsp;is&nbsp;<i>Origin2</i>,<br>
&nbsp;&nbsp;&nbsp;<i>Player2Row2</i>&nbsp;is&nbsp;<i>Origin2</i>&nbsp;+&nbsp;1,<br>
&nbsp;&nbsp;&nbsp;<i>Player2Row3</i>&nbsp;is&nbsp;<i>Origin2</i>&nbsp;+&nbsp;2,<br>
&nbsp;&nbsp;&nbsp;<i>Player2Row4</i>&nbsp;is&nbsp;<i>Origin2</i>&nbsp;+&nbsp;3,<br>
&nbsp;&nbsp;&nbsp;<i>Player1Tiles</i>&nbsp;=&nbsp;[&nbsp;t(<i>Col1</i>,&nbsp;<i>Player1Row1</i>,[a,a,a,a],&nbsp;t01),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player1Row2</i>,[b,a,a,a],&nbsp;t02),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player1Row3</i>,[b,b,a,a],&nbsp;t03),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player1Row4</i>,[b,a,b,a],&nbsp;t04),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player1Row1</i>,[a,a,a,a],&nbsp;t05),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player1Row2</i>,[b,a,a,a],&nbsp;t06),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player1Row3</i>,[b,b,a,a],&nbsp;t07),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player1Row4</i>,[b,a,b,a],&nbsp;t08)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;<i>Player2Tiles</i>&nbsp;=&nbsp;[t(<i>Col1</i>,&nbsp;<i>Player2Row1</i>,[b,b,b,b],&nbsp;t09),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player2Row2</i>,[a,b,b,b],&nbsp;t10),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player2Row3</i>,[a,a,b,b],&nbsp;t11),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col1</i>,&nbsp;<i>Player2Row4</i>,[a,b,a,b],&nbsp;t12),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player2Row1</i>,[b,b,b,b],&nbsp;t13),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player2Row2</i>,[a,b,b,b],&nbsp;t14),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player2Row3</i>,[a,a,b,b],&nbsp;t15),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;t(<i>Col2</i>,&nbsp;<i>Player2Row4</i>,[a,b,a,b],&nbsp;t16)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;].<br>
<br>
<span style='color:green'>%&nbsp;(X&nbsp;>&nbsp;Y)&nbsp;is&nbsp;a&nbsp;point&nbsp;(X,Y).</span><br>
<span style='color:green'>%&nbsp;Web&nbsp;API&nbsp;method&nbsp;arguments&nbsp;of&nbsp;type&nbsp;number&nbsp;or&nbsp;integer&nbsp;accept&nbsp;arithmetic</span><br>
<span style='color:green'>%&nbsp;expressions;&nbsp;e.g.&nbsp;(1&nbsp;+&nbsp;0.5&nbsp;*&nbsp;50).</span><br>
<br>
draw_tile(<i>Ctx</i>,&nbsp;<i>Tile</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_x(<i>Tile</i>,&nbsp;<i>X</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_y(<i>Tile</i>,&nbsp;<i>Y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_size(<i>Tile</i>,&nbsp;<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Corners</i>&nbsp;=&nbsp;[<i>X</i>&nbsp;>&nbsp;<i>Y</i>,<i>X</i>&nbsp;+&nbsp;<i>Size</i>&nbsp;>&nbsp;<i>Y</i>,<i>X</i>&nbsp;+&nbsp;<i>Size</i>&nbsp;>&nbsp;<i>Y</i>&nbsp;+&nbsp;<i>Size</i>,&nbsp;<i>X</i>&nbsp;>&nbsp;<i>Y</i>&nbsp;+&nbsp;<i>Size</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Center</i>&nbsp;=&nbsp;(<i>X</i>&nbsp;+&nbsp;0.5&nbsp;*&nbsp;<i>Size</i>&nbsp;>&nbsp;<i>Y</i>&nbsp;+&nbsp;0.5&nbsp;*&nbsp;<i>Size</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_colors(<i>Tile</i>,&nbsp;<i>Colors</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_triangles(<i>Corners</i>,&nbsp;<i>Colors</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_bx(<i>Tile</i>,&nbsp;<i>BX</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_by(<i>Tile</i>,&nbsp;<i>BY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_label(<i>BX</i>,&nbsp;<i>BY</i>,&nbsp;<i>Text</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillStyle&nbsp;&lt;:+&nbsp;'#000',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillText(<i>Text</i>,&nbsp;<i>X</i>+5,&nbsp;<i>Y</i>+10),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restore<br>
&nbsp;&nbsp;&nbsp;&nbsp;].<br>
<br>
<br>
draw_triangles([<i>P1</i>,&nbsp;<i>P2</i>|<i>OtherCorners</i>],&nbsp;[<i>Color1</i>|<i>OtherColors</i>],&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;draw_triangle(<i>P1</i>,&nbsp;<i>P2</i>,&nbsp;<i>Color1</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>),<br>
&nbsp;&nbsp;&nbsp;draw_triangles1([<i>P2</i>|<i>OtherCorners</i>],&nbsp;<i>OtherColors</i>,&nbsp;<i>P1</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>).<br>
<br>
draw_triangles1([<i>P1</i>],&nbsp;[<i>Color</i>],&nbsp;<i>P2</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;draw_triangle(<i>P1</i>,&nbsp;<i>P2</i>,&nbsp;<i>Color</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>).<br>
draw_triangles1([<i>P1</i>,&nbsp;<i>P2</i>|<i>OtherCorners</i>],&nbsp;[<i>Color1</i>|<i>OtherColors</i>],&nbsp;<i>FirstP</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;draw_triangle(<i>P1</i>,&nbsp;<i>P2</i>,&nbsp;<i>Color1</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>),<br>
&nbsp;&nbsp;&nbsp;draw_triangles1([<i>P2</i>|<i>OtherCorners</i>],&nbsp;<i>OtherColors</i>,&nbsp;<i>FirstP</i>,&nbsp;<i>Center</i>,&nbsp;<i>Ctx</i>).<br>
<br>
draw_triangle(<i>P1x</i>&nbsp;>&nbsp;<i>P1y</i>,&nbsp;<i>P2x</i>&nbsp;>&nbsp;<i>P2y</i>,&nbsp;<i>Color</i>,&nbsp;<i>CenterX</i>&nbsp;>&nbsp;<i>CenterY</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginPath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveTo(<i>P1x</i>,&nbsp;<i>P1y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineTo(<i>P2x</i>,&nbsp;<i>P2y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineTo(<i>CenterX</i>,&nbsp;<i>CenterY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePath,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillStyle&nbsp;&lt;:+&nbsp;<i>Color</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fill,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stroke,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restore<br>
&nbsp;&nbsp;&nbsp;&nbsp;].<br>
<br>
draw_all_tiles(<i>AllTiles</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>CW</i>,&nbsp;<i>CH</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;center_board,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillStyle&nbsp;&lt;:+&nbsp;'#999',<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillRect(0,&nbsp;0,&nbsp;<i>CW</i>,&nbsp;<i>CH</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tiles1(<i>AllTiles</i>,&nbsp;<i>Ctx</i>).<br>
<br>
draw_all_tiles1([],&nbsp;<i>_</i>).<br>
draw_all_tiles1([<i>H</i>|<i>T</i>],&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tile(<i>H</i>,&nbsp;<i>Ctx</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_all_tiles1(<i>T</i>,&nbsp;<i>Ctx</i>).<br>
<br>
draw_all_tile(<i>Tile</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;(tile_in_inactive_hand(<i>Tile</i>)&nbsp;->&nbsp;<i>GlobalAlpha</i>&nbsp;=&nbsp;0.3;&nbsp;<i>GlobalAlpha</i>&nbsp;=&nbsp;1),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;globalAlpha&nbsp;&lt;:+&nbsp;<i>GlobalAlpha</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_tile(<i>Ctx</i>,&nbsp;<i>Tile</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>*></span>&nbsp;restore,<br>
&nbsp;&nbsp;&nbsp;&nbsp;(is_selected(<i>Tile</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;draw_selected_tile_mark(<i>Tile</i>,&nbsp;<i>Ctx</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_replacements(<i>Tile</i>,&nbsp;<i>Ctx</i>).<br>
<br>
draw_replacements(<i>Tile</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;(game_replacements(<i>Rs</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;member(<i>Tile</i>,&nbsp;<i>Rs</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;draw_replacement_tile_mark(<i>Tile</i>,&nbsp;<i>Ctx</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;).<br>
<br>
center_board.<br>
<br>
draw_selected_tile_mark(<i>Tile</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_x(<i>Tile</i>,&nbsp;<i>X</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_y(<i>Tile</i>,&nbsp;<i>Y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_size(<i>Tile</i>,&nbsp;<i>Size</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>MidX</i>&nbsp;is&nbsp;<i>X</i>&nbsp;+&nbsp;(<i>Size</i>&nbsp;/&nbsp;2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>MidY</i>&nbsp;is&nbsp;<i>Y</i>&nbsp;+&nbsp;(<i>Size</i>&nbsp;/&nbsp;2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Adjust</i>&nbsp;is&nbsp;<i>Size</i>&nbsp;/&nbsp;4,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>VerticalTopX</i>&nbsp;=&nbsp;<i>MidX</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>VerticalTopY</i>&nbsp;is&nbsp;<i>MidY</i>&nbsp;-&nbsp;<i>Adjust</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>VerticalBottomX</i>&nbsp;=&nbsp;<i>MidX</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>VerticalBottomY</i>&nbsp;is&nbsp;<i>MidY</i>&nbsp;+&nbsp;<i>Adjust</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>HorizontalLeftX</i>&nbsp;is&nbsp;<i>MidX</i>-<i>Adjust</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>HorizontalLeftY</i>&nbsp;=&nbsp;<i>MidY</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>HorizontalRightX</i>&nbsp;is&nbsp;<i>MidX</i>+<i>Adjust</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>HorizontalRightY</i>&nbsp;=&nbsp;<i>MidY</i>,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_turn(<i>GT</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;highlight_color(<i>GT</i>,&nbsp;<i>Color</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineWidth&nbsp;&lt;:+&nbsp;3,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strokeStyle&nbsp;&lt;:+&nbsp;<i>Color</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginPath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveTo(<i>VerticalTopX</i>,&nbsp;<i>VerticalTopY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineTo(<i>VerticalBottomX</i>,&nbsp;<i>VerticalBottomY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stroke,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginPath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveTo(<i>HorizontalLeftX</i>,&nbsp;<i>HorizontalLeftY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineTo(<i>HorizontalRightX</i>,&nbsp;<i>HorizontalRightY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stroke,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restore<br>
&nbsp;&nbsp;&nbsp;&nbsp;].<br>
<br>
draw_replacement_tile_mark(<i>Tile</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_x(<i>Tile</i>,&nbsp;<i>X</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_y(<i>Tile</i>,&nbsp;<i>Y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_size(<i>Tile</i>,&nbsp;<i>Size</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>MidX</i>&nbsp;is&nbsp;<i>X</i>&nbsp;+&nbsp;(<i>Size</i>&nbsp;/&nbsp;2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>MidY</i>&nbsp;is&nbsp;<i>Y</i>&nbsp;+&nbsp;(<i>Size</i>&nbsp;/&nbsp;2),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Adjust</i>&nbsp;is&nbsp;<i>Size</i>&nbsp;/&nbsp;4,<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_turn(<i>GT</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;highlight_color(<i>GT</i>,&nbsp;<i>Color</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineWidth&nbsp;&lt;:+&nbsp;3,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strokeStyle&nbsp;&lt;:+&nbsp;<i>Color</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginPath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;arc(<i>MidX</i>,&nbsp;<i>MidY</i>,&nbsp;<i>Adjust</i>,&nbsp;0,&nbsp;2*pi),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;closePath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stroke,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;restore<br>
&nbsp;&nbsp;&nbsp;&nbsp;].<br>
<br>
draw_legal_moves(<i>LegalPositions</i>,&nbsp;<i>LegalPositionsWithRotation</i>,&nbsp;<i>Ctx</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;game_turn(<i>GT</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;highlight_color(<i>GT</i>,&nbsp;<i>Color</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;save,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;beginPath,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fillStyle&nbsp;&lt;:+&nbsp;<i>Color</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;strokeStyle&nbsp;&lt;:+&nbsp;<i>Color</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lineWidth&nbsp;&lt;:+&nbsp;3,<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;globalAlpha&nbsp;&lt;:+&nbsp;0.8<br>
&nbsp;&nbsp;&nbsp;&nbsp;],<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_tile_size(<i>TileSize</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_legal_positions_with_rotations(<i>LegalPositionsWithRotation</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_legal_positions(<i>LegalPositions</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>),<br>
<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>*></span>&nbsp;restore.<br>
<br>
draw_legal_positions_with_rotations([],&nbsp;<i>_</i>,&nbsp;<i>_</i>).<br>
draw_legal_positions_with_rotations([<i>H</i>|<i>T</i>],&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;legal_position_b(<i>H</i>,&nbsp;<i>B</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;get_top_left_board_tile_coords(<i>B</i>,&nbsp;<i>TileSize</i>,&nbsp;<i>X</i>&nbsp;>&nbsp;<i>Y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>*></span>&nbsp;[<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rect(<i>X</i>,&nbsp;<i>Y</i>,&nbsp;<i>TileSize</i>,&nbsp;<i>TileSize</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stroke<br>
&nbsp;&nbsp;&nbsp;&nbsp;],<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_legal_positions_with_rotations(<i>T</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>).<br>
<br>
draw_legal_positions([],&nbsp;<i>_</i>,&nbsp;<i>_</i>).<br>
draw_legal_positions([<i>H</i>|<i>T</i>],&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;legal_position_b(<i>H</i>,&nbsp;<i>B</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;get_top_left_board_tile_coords(<i>B</i>,&nbsp;<i>TileSize</i>,&nbsp;<i>X</i>&nbsp;>&nbsp;<i>Y</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Ctx</i>&nbsp;<span style='color:blue'>>*></span>&nbsp;fillRect(<i>X</i>,&nbsp;<i>Y</i>,&nbsp;<i>TileSize</i>,&nbsp;<i>TileSize</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;draw_legal_positions(<i>T</i>,&nbsp;<i>Ctx</i>,&nbsp;<i>TileSize</i>).<br>
<br>
get_top_left_board_tile_coords(<i>BX</i>&nbsp;>&nbsp;<i>BY</i>,&nbsp;<i>TileSize</i>,&nbsp;<i>X</i>&nbsp;>&nbsp;<i>Y</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;game_board_left(<i>Left</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_board_translate(<i>TX</i>&nbsp;>&nbsp;<i>TY</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_board_width(<i>W</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_board_top(<i>Top</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_board_height(<i>H</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>X</i>&nbsp;&nbsp;is&nbsp;<i>Left</i>&nbsp;+&nbsp;<i>TX</i>&nbsp;+&nbsp;(<i>W</i>&nbsp;/&nbsp;2)&nbsp;+&nbsp;(<i>BX</i>&nbsp;-&nbsp;0.5)&nbsp;*&nbsp;<i>TileSize</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Y</i>&nbsp;&nbsp;is&nbsp;<i>Top</i>&nbsp;+&nbsp;<i>TY</i>&nbsp;+&nbsp;(<i>H</i>&nbsp;/&nbsp;2)&nbsp;+&nbsp;(<i>BY</i>&nbsp;-&nbsp;0.5)&nbsp;*&nbsp;<i>TileSize</i>.<br>
<br>
container_id(container(<i>ID</i>,&nbsp;<i>_Type</i>),&nbsp;<i>ID</i>).<br>
container_type(container(<i>_ID</i>,&nbsp;<i>Type</i>),&nbsp;<i>Type</i>).<br>
<br>
tile_label(<i>BoardX</i>,&nbsp;<i>BoardY</i>,&nbsp;<i>Text</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;number_codes(<i>BoardX</i>,&nbsp;<i>BXCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;number_codes(<i>BoardY</i>,&nbsp;<i>BYCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;append_lists(["x",&nbsp;<i>BXCodes</i>,&nbsp;"y",&nbsp;<i>BYCodes</i>],&nbsp;<i>TextCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>Text</i>,&nbsp;<i>TextCodes</i>).<br>
<br>
tile_in_inactive_hand(<i>Tile</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_container(<i>Tile</i>,&nbsp;<i>Container</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;container_type(<i>Container</i>,&nbsp;hand),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_turn(<i>TurnID</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;\+&nbsp;container_id(<i>Container</i>,&nbsp;<i>TurnID</i>).<br>
<br>
tile_in_active_hand(<i>Tile</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;tile_container(<i>Tile</i>,&nbsp;<i>Container</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;container_type(<i>Container</i>,&nbsp;hand),<br>
&nbsp;&nbsp;&nbsp;&nbsp;game_turn(<i>TurnID</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;container_id(<i>Container</i>,&nbsp;<i>TurnID</i>).<br>
<br>
highlight_color(1,&nbsp;'#CCFFCC').<br>
highlight_color(2,&nbsp;'#CCCCFF').<br>
<br>
<span style='color:green'>%legal_position_bx(legal_position(BX,&nbsp;_BY),&nbsp;BX).</span><br>
<span style='color:green'>%legal_position_by(legal_position(_BX,&nbsp;BY),&nbsp;BY).</span><br>
<br>
legal_position_b(<i>T</i>,&nbsp;<i>BX</i>&nbsp;>&nbsp;<i>BY</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;legal_position_bx(<i>T</i>,&nbsp;<i>BX</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;legal_position_by(<i>T</i>,&nbsp;<i>BY</i>).<br>

        </code>
    </div>
    </div>
</div>


    <footer>
        <hr>
        <table style="width:100%">
        <tr>
        <td>Version 1.2.1, September 2019.</td>
        <td style="text-align:right">Powered by ProscriptLS Prolog - Logic at Your Service.</td>
        </tr>
        </table>
    </footer>
</div>
<!-- proscriptls interpreter
<script src="../terminal/proscript_interpreter_terminal.js" type="text/javascript"></script>
<div id="proscriptinterpreter">
</div>
-->
<script type="text/prolog" src="index.pl"></script>
</body>
</html>
