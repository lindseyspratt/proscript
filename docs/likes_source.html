<html lang="en">
<head>
    <title>
        Likes source
    </title>
    <link rel="stylesheet" href="index.css"/>
    <script type="text/javascript" src="../dist/proscriptls.js"></script>
    <!-- proscriptls interpreter
    <script src="../terminal/jquery-3.3.1.js"></script>
    <script src="../terminal/jquery_terminal.js"></script>
    <link href="../terminal/jquery_terminal.css" rel="stylesheet"/>
    -->
</head>

<body onload="proscriptls_init ();">
<!-- Side navigation -->
<ul class="sidenav">
    <li><span class="caret"></span>
        <a   id="home_index" href="../index.html#home"> Home </a>
        <ul class='nested'>
            <li><a   id="prolog-for-the-web_index" href="../index.html#prolog-for-the-web"> Prolog for the Web </a></li>
            <li><a   id="running-proscriptls_index" href="../index.html#running-proscriptls"> Running ProscriptLS </a></li>
            <li><a   id="compiling-proscriptls_index" href="../index.html#compiling-proscriptls"> Compiling ProscriptLS </a></li>
            <li><a   id="basic-example_index" href="../index.html#basic-example"> Basic Example </a></li>
        </ul>
    </li>
    <li><span class="caret"></span><a   id="doc_index" href="index_doc.html#doc"> Documentation </a>
        <ul class='nested'>
            <li><span class="caret"></span><a   id="reference_index" href="index_doc.html#reference"> Reference </a>
                <ul class='nested'>
                    <li><a   id="using_proscriptls_index" href="index_doc.html#using_proscriptls"> Using ProscriptLS </a></li>
                    <li><a   id="debugger_index" href="index_doc.html#debugger"> Debugger </a></li>
                    <li><span class="caret"></span><a   id="objects_index" href="index_doc.html#objects"> Javascript objects </a>
                        <ul class='nested'>
                            <li><a   id="web_api_index" href="index_doc.html#web_api"> Web API </a></li>
                            <li><a   id="object_language_index" href="index_doc.html#object_language"> Object Language </a></li>
                        </ul>
                    </li>
                    <li><a   id="library_index" href="index_doc.html#library"> Library </a></li>
                    <li><a   id="compilation_index" href="index_doc.html#compilation"> Compilation </a></li>
                </ul>
            </li>
            <li><span class="caret"></span><a   id="examples_index" href="index_doc.html#examples"> Examples </a>
                <ul class="nested">
                    <li><span class="caret"></span><a   id="calculator_example_index" href="index_doc.html#calculator_example"> Calculator </a>
                        <ul class="nested">
                            <li><a   id="calculator_example_source_index" href="calculator_source.html#calculator_example_source"> Calculator Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="console_example_index" href="index_doc.html#console_example"> Console Button </a>
                        <ul class="nested">
                            <li><a   id="console_example_source_index" href="console_source.html#console_example_source"> Console Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="simple_example_index" href="index_doc.html#simple_example"> Simple </a>
                        <ul class="nested">
                            <li><a   id="simple_example_source_index" href="simple_source.html#simple_example_source"> Simple Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="likes_example_index" href="index_doc.html#likes_example"> Likes </a>
                        <ul class="nested">
                            <li><a class="active index"  id="likes_example_source_index" href="#likes_example_source"> Likes Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="consult_console_example_index" href="index_doc.html#consult_console_example"> Consult console </a>
                        <ul class="nested">
                            <li><a   id="consult_console_example_source_index" href="consult_console_source.html#consult_console_example_source"> Consult Console Example Source </a></li>
                        </ul>
                    </li>
                    <li><span class="caret"></span><a   id="tiles_example_index" href="index_doc.html#tiles_example"> Consult console </a>
                        <ul class="nested">
                            <li><a   id="tiles_example_source_index" href="tiles_source.html#tiles_example_source"> Tiles Example Source </a></li>
                        </ul>
                    </li>
                </ul>
            </li>
        </ul>
    </li>
    <li><a   id="download_index" href="index_download.html#download"> Download </a></li>
    <li><a   id="about_index" href="index_about.html#about"> About </a></li>
</ul>

<!-- Page content -->
<div class="content">
    <header>
        <h1>Likes source</h1>
        <hr>
    </header>

    <div class="body" id="likes_example_source">
    <p>
        The ProscriptLS source used in the Likes example.
        Links to these source files are:
        <a href="../examples/tau_likes.pl">tau_likes.pl</a>
        .
        This program uses the object.pl and listut2.pl library files.
    </p>
    <div id="prolog" style='white-space:nowrap;width:100%;height:100%;background-color:#eee;overflow:auto;float:left'>
    <div id="likes_pl" >
        <h2 id='likes_pl_header'>tau_likes.pl</h2>
        <code class='content'>
        <span style='color:red'>:-</span>&nbsp;ensure_loaded('../library/object').&nbsp;<span style='color:green'>%&nbsp;for&nbsp;>>/2,&nbsp;etc.</span><br>
<span style='color:red'>:-</span>&nbsp;ensure_loaded('../library/listut2').&nbsp;<span style='color:green'>%&nbsp;for&nbsp;append_lists/2</span><br>
<span style='color:red'>:-</span>&nbsp;dynamic(likes/2).<br>
<span style='color:red'>:-</span>&nbsp;initialization(init).<br>
<br>
init&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;button,&nbsp;addEventListener(click,&nbsp;on_click)],<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;select,&nbsp;addEventListener(change,&nbsp;change_name)],<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;program,&nbsp;addEventListener(keyup,&nbsp;consult_text)],<br>
&nbsp;&nbsp;&nbsp;&nbsp;consult_text,<br>
&nbsp;&nbsp;&nbsp;&nbsp;change_name,<br>
&nbsp;&nbsp;&nbsp;&nbsp;writeln(completed).<br>
<br>
<span style='color:green'>%&nbsp;Since&nbsp;consult_text/0&nbsp;is&nbsp;called&nbsp;on&nbsp;every&nbsp;key,&nbsp;there&nbsp;are&nbsp;many&nbsp;compile&nbsp;failures</span><br>
<span style='color:green'>%&nbsp;due&nbsp;to&nbsp;editing&nbsp;to&nbsp;the&nbsp;textarea&nbsp;being&nbsp;incomplete.</span><br>
<span style='color:green'>%&nbsp;the&nbsp;catch/3&nbsp;metagoal&nbsp;allows&nbsp;consult_text/0&nbsp;to&nbsp;ignore&nbsp;these&nbsp;exceptions</span><br>
<span style='color:green'>%&nbsp;by&nbsp;treating&nbsp;them&nbsp;as&nbsp;simple&nbsp;failures&nbsp;instead&nbsp;of&nbsp;recording&nbsp;them&nbsp;to&nbsp;the&nbsp;console&nbsp;log.</span><br>
<br>
consult_text&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;program,&nbsp;value&nbsp;+:>&nbsp;<i>Program</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;retractall(likes(<i>_</i>,<i>_</i>)),<br>
&nbsp;&nbsp;&nbsp;&nbsp;catch(compile_atom(<i>Program</i>),&nbsp;<i>_</i>,&nbsp;fail),<br>
&nbsp;&nbsp;&nbsp;&nbsp;update_select.<br>
<br>
update_select&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;setof(<i>Name</i>,&nbsp;<i>X</i>^likes(<i>Name</i>,&nbsp;<i>X</i>),&nbsp;<i>Names</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Select</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;select,&nbsp;innerHTML&nbsp;&lt;:+&nbsp;""],<br>
&nbsp;&nbsp;&nbsp;&nbsp;add_options([everyone|<i>Names</i>],&nbsp;<i>Select</i>).<br>
<br>
add_options([],&nbsp;<i>_</i>).<br>
add_options([<i>H</i>|<i>T</i>],&nbsp;<i>Select</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;create_dom_element('OPTION',&nbsp;<i>Option</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>H</i>,&nbsp;<i>HCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;create_dom_text_node(<i>HCodes</i>,&nbsp;<i>TextNode</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Option</i>&nbsp;<span style='color:blue'>>+></span>&nbsp;value&nbsp;&lt;:&nbsp;<i>H</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;append_dom_node_child(<i>Option</i>,&nbsp;<i>TextNode</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;append_dom_node_child(<i>Select</i>,&nbsp;<i>Option</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;add_options(<i>T</i>,&nbsp;<i>Select</i>).<br>
<br>
on_click&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;select,&nbsp;selectedIndex&nbsp;+:>&nbsp;<i>Index</i>,&nbsp;item(<i>Index</i>)&nbsp;*:>&nbsp;<i>Option</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Option</i>&nbsp;<span style='color:blue'>>+></span>&nbsp;value&nbsp;:>&nbsp;<i>Name</i>,<br>
&nbsp;&nbsp;&nbsp;&nbsp;show_likes(<i>Name</i>).<br>
<br>
show_likes(<i>Name</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;result,&nbsp;innerHTML&nbsp;&lt;:+&nbsp;""],<br>
&nbsp;&nbsp;&nbsp;&nbsp;(<i>Name</i>&nbsp;\=&nbsp;everyone<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;<i>LocalName</i>&nbsp;=&nbsp;<i>Name</i><br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;true),<br>
&nbsp;&nbsp;&nbsp;&nbsp;findall(<i>LocalName</i>-<i>Object</i>,&nbsp;likes(<i>LocalName</i>,&nbsp;<i>Object</i>),&nbsp;<i>Answers</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;show(<i>Answers</i>).<br>
<br>
show(<i>Answers</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Result</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;result,&nbsp;innerHTML&nbsp;&lt;:+&nbsp;""],<br>
&nbsp;&nbsp;&nbsp;&nbsp;combine_answers(<i>Answers</i>,&nbsp;<i>Text</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Result</i>&nbsp;<span style='color:blue'>>+></span>&nbsp;innerHTML&nbsp;&lt;:&nbsp;<i>Text</i>.<br>
<br>
combine_answers([],&nbsp;[]).<br>
combine_answers([<i>Name</i>-<i>Object</i>|<i>T</i>],&nbsp;<i>Text</i>)&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>Name</i>,&nbsp;<i>NameCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>Object</i>,&nbsp;<i>ObjectCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;append_lists(["&lt;div>",&nbsp;<i>NameCodes</i>,&nbsp;"&nbsp;likes&nbsp;",&nbsp;<i>ObjectCodes</i>,&nbsp;"&lt;/div>",&nbsp;<i>Tail</i>],&nbsp;<i>Text</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;combine_answers(<i>T</i>,&nbsp;<i>Tail</i>).<br>
<br>
change_name&nbsp;<span style='color:red'>:-</span><br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;select,&nbsp;value&nbsp;+:>&nbsp;<i>Name</i>],<br>
&nbsp;&nbsp;&nbsp;&nbsp;(<i>Name</i>&nbsp;=&nbsp;everyone<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;<i>TextCodes</i>&nbsp;=&nbsp;"<i>See</i>&nbsp;all&nbsp;likes",<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Disabled</i>&nbsp;=&nbsp;false<br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;likes(<i>Name</i>,&nbsp;<i>_</i>)<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;->&nbsp;atom_codes(<i>Name</i>,&nbsp;<i>NameCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;append_lists(["<i>What</i>&nbsp;does&nbsp;",&nbsp;<i>NameCodes</i>,&nbsp;"&nbsp;like?"],&nbsp;<i>TextCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<i>Disabled</i>&nbsp;=&nbsp;false<br>
&nbsp;&nbsp;&nbsp;&nbsp;;<br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>Name</i>,&nbsp;<i>NameCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;append("<i>Invalid</i>&nbsp;name:&nbsp;",&nbsp;<i>NameCodes</i>,&nbsp;<i>TextCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>Disabled</i>&nbsp;=&nbsp;true<br>
&nbsp;&nbsp;&nbsp;&nbsp;),<br>
&nbsp;&nbsp;&nbsp;&nbsp;atom_codes(<i>Text</i>,&nbsp;<i>TextCodes</i>),<br>
&nbsp;&nbsp;&nbsp;&nbsp;<i>_</i>&nbsp;<span style='color:blue'>>></span>&nbsp;[id&nbsp;-:>&nbsp;button,&nbsp;value&nbsp;&lt;:+&nbsp;<i>Text</i>,&nbsp;disabled&nbsp;&lt;:+&nbsp;<i>Disabled</i>].<br>
<br>

        </code>
    </div>
    </div>
</div>


    <footer>
        <hr>
        <table style="width:100%">
        <tr>
        <td>Version 0.2.0, July 2019.</td>
        <td style="text-align:right">Powered by ProscriptLS Prolog - Logic at Your Service.</td>
        </tr>
        </table>
    </footer>
</div>
<!-- proscriptls interpreter
<script src="../terminal/proscript_interpreter_terminal.js" type="text/javascript"></script>
<div id="proscriptinterpreter">
</div>
-->
<script type="text/prolog" src="index.pl"></script>
</body>
</html>
